var e,t;"function"==typeof(e=globalThis.define)&&(t=e,e=null),function(t,i,s,a,o){var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n="function"==typeof r[a]&&r[a],l=n.cache||{},c="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function h(e,i){if(!l[e]){if(!t[e]){var s="function"==typeof r[a]&&r[a];if(!i&&s)return s(e,!0);if(n)return n(e,!0);if(c&&"string"==typeof e)return c(e);var o=Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}u.resolve=function(i){var s=t[e][1][i];return null!=s?s:i},u.cache={};var d=l[e]=new h.Module(e);t[e][0].call(d.exports,u,d,d.exports,this)}return l[e].exports;function u(e){var t=u.resolve(e);return!1===t?{}:h(t)}}h.isParcelRequire=!0,h.Module=function(e){this.id=e,this.bundle=h,this.exports={}},h.modules=t,h.cache=l,h.parent=n,h.register=function(e,i){t[e]=[function(e,t){t.exports=i},{}]},Object.defineProperty(h,"root",{get:function(){return r[a]}}),r[a]=h;for(var d=0;d<i.length;d++)h(i[d]);if(s){var u=h(s);"object"==typeof exports&&"undefined"!=typeof module?module.exports=u:"function"==typeof e&&e.amd?e(function(){return u}):o&&(this[o]=u)}}({cBHh0:[function(e,t,i){var s=e("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(i),s.export(i,"config",()=>o);var a=e("@plasmohq/storage");let o={matches:["https://www.instagram.com/*"]},r=new a.Storage({area:"local"});new class{constructor(){this.active=!1,this.sessionStart=Date.now(),this.stats={follows:0,likes:0,dms:0,unfollows:0},this.logs=[],this.followedUsers=[],this.processedHistory=[],this.sessionEngagedProfiles=new Set,this.currentSessionActions=0,this.config={likeEnabled:!0,followEnabled:!1,dmEnabled:!1,unfollowEnabled:!1,sourceHashtags:!0,sourceCompetitors:!1,chaosEnabled:!1},this.delayConfig={navMin:10,navMax:20,viewMin:8,viewMax:15,actionMin:3,actionMax:7,gridMin:10,gridMax:15,batchLimit:15,batchPause:720,unfollowDays:3,unfollowMin:10,unfollowMax:20,chaosFreq:30,chaosDur:5},this._loopRunning=!1,this.init()}async init(){try{console.log("GrowthBot: Engine Started");let[e,t,i,s,a,o,n,l]=await Promise.all([r.get("botConfig"),r.get("delays"),r.get("stats"),r.get("logs"),r.get("followedUsers"),r.get("processedHistory"),r.get("targetHashtags"),r.get("targetCompetitors")]);e&&(this.config=e),t&&(this.delayConfig=t),i&&(this.stats={...this.stats,...i}),s&&(this.logs=s),a&&(this.followedUsers=a),o&&(this.processedHistory=(o||[]).map(e=>e.toLowerCase())),n||await r.set("targetHashtags",["#digitalart","#photography"]),l||await r.set("targetCompetitors",["@cristiano"]),this.listenToToggles()}catch(e){}}async listenToToggles(){let e=await r.get("isRunning");this.active=!!e,this.active&&(this.addLog("Bot initialized and running","success"),this.runLoop()),r.watch({isRunning:async e=>{let t=this.active;if(this.active=!!e.newValue,this.active&&!t){this.addLog(">>> ENGINE LAUNCHED: Automation Online","success");let e=await r.get("botConfig"),t=await r.get("delays");e&&(this.config=e),t&&(this.delayConfig=t),await r.set("lastNavTime",0),this.currentSessionActions=0,this.sessionEngagedProfiles.clear(),this.runLoop()}else!this.active&&t&&this.addLog("<<< ENGINE STOPPED: Automation Offline","warning")},botConfig:e=>{e.newValue&&(this.config=e.newValue)},delays:e=>{e.newValue&&(this.delayConfig=e.newValue)}})}async addToHistory(e){if(!e)return;let t=e.split("?")[0].replace(/\/$/,"").toLowerCase();this.processedHistory.includes(t)||(this.processedHistory=[t,...this.processedHistory].slice(0,5e3),await r.set("processedHistory",this.processedHistory))}async saveFollowedTarget(e,t){if(e&&""!==e.trim())try{let i={username:e.trim(),url:t.split("?")[0].replace(/\/$/,"").toLowerCase(),timestamp:Date.now(),dateStr:new Date().toLocaleDateString()};this.followedUsers=[i,...this.followedUsers].slice(0,5e3),await r.set("followedUsers",this.followedUsers),this.addLog(`Capturing Audience: @${e}`,"info"),await this.addToHistory(t),this.currentSessionActions++}catch(e){}}async addLog(e,t="info"){try{let i={time:new Date().toLocaleTimeString(),msg:e,type:t};this.logs=[i,...this.logs].slice(0,50),await r.set("logs",this.logs),console.log(`[GrowthBot] ${e}`)}catch(e){}}async sleep(e){return new Promise(t=>setTimeout(t,e))}async randomSleep(e){let t=1e3*(this.delayConfig[`${e}Min`]||5),i=1e3*(this.delayConfig[`${e}Max`]||15),s=Math.floor(Math.random()*(i-t+1)+t);return this.addLog(`Cooldown: ${Math.round(s/1e3)}s`,"wait"),this.sleep(s)}async runLoop(){if(!this._loopRunning){for(this._loopRunning=!0;this.active;)try{let e=this.delayConfig.batchLimit||15;if(this.currentSessionActions>=e){let t=this.delayConfig.batchPause||3600;this.addLog(`SECURITY PROTECTION: limit reached (${e}). Resting ${t}s...`,"warning"),await this.sleep(1e3*t),this.currentSessionActions=0;continue}let t=window.location.href.toLowerCase(),i=window.location.pathname.toLowerCase();if(!t.includes("instagram.com")){await this.sleep(5e3);continue}let s=document.querySelector('div[role="dialog"]'),a=s?.querySelector("h1, h2, div")?.textContent||"";if(this.config.chaosEnabled){let e=await r.get("lastChaosTime")||0,t=Date.now()-e>6e4*(this.delayConfig.chaosFreq||30),i=Date.now()-this.sessionStart<1e4;(0===e||i&&t)&&(this.addLog("\u23f3 Chaos timer reset to wait full cycle.","wait"),e=Date.now(),await r.set("lastChaosTime",e));let s=6e4*(this.delayConfig.chaosFreq||30);if(Date.now()-e>s){await r.set("lastChaosTime",Date.now()),await this.executeChaosRoutine();let e=await r.get("isRunning");if(!e||!this.active)return;continue}}if(s){if(a.includes("Followers")||a.includes("Seguidores")){await this.handleFollowersModal(s);continue}if(i.includes("/p/")||i.includes("/reels/")||s.querySelector("article")){await this.handlePostInteraction();continue}}else if(i.includes("/p/")||i.includes("/reels/")){await this.handlePostInteraction();continue}else if(i.includes("/explore/tags/")||i.includes("/explore/search/"))await this.handleHashtagPage();else if(1!==i.split("/").filter(Boolean).length||i.includes("explore")){let e=await r.get("lastNavTime")||0,t=1e3*(this.delayConfig.navMin||90);Date.now()-e>t?await this.navigateToNextTarget():await this.sleep(3e3)}else{await this.analyzeOwnProfile();let e=await this.handleProfilePage();if("DONE"===e){this.addLog("Chain-Mission triggered: Moving to next immediately.","success"),await r.set("lastNavTime",0),await this.navigateToNextTarget();break}}this.active&&await this.randomSleep("grid")}catch(e){this.addLog(`Engine hiccup: ${e.message}`,"warning"),await this.sleep(8e3)}this._loopRunning=!1}}async navigateToNextTarget(){let e=[];if(this.config.sourceHashtags&&e.push("hashtag"),this.config.sourceCompetitors&&e.push("competitor"),this.config.unfollowEnabled&&e.push("unfollow"),0===e.length){this.addLog("No active sources selected in Strategy. Waiting...","warning"),await this.sleep(1e4);return}let t=e.sort(()=>Math.random()-.5),i="hl=en";for(let e of t)if("hashtag"===e){let e=await r.get("targetHashtags")||[];if(0===e.length){this.addLog("Source 'Hashtags' enabled but list is empty.","warning");continue}let t=e[Math.floor(Math.random()*e.length)].replace("#","").trim();if(t){this.addLog(`>>> Mission: Hashtag #${t}`,"success"),await r.set("lastNavTime",Date.now()),window.location.href=`https://www.instagram.com/explore/tags/${t}/?${i}`;return}}else if("competitor"===e){let e=await r.get("targetCompetitors")||[];if(0===e.length){this.addLog("Source 'Competitors' enabled but list is empty.","warning");continue}let t=e[Math.floor(Math.random()*e.length)].replace("@","").trim();if(t){this.addLog(`>>> Mission: Competitor @${t}`,"success"),await r.set("lastNavTime",Date.now()),window.location.href=`https://www.instagram.com/${t}/?${i}`;return}}else if("unfollow"===e){let e=Date.now(),t=864e5*(this.delayConfig.unfollowDays||3),s=[...this.followedUsers].reverse().filter(i=>!i.protected&&e-i.timestamp>t);if(s.length>0){let e=s[0];if(e&&e.username){this.addLog(`>>> Mission: Unfollow @${e.username}`,"warning"),await r.set("lastNavTime",Date.now()),window.location.href=`https://www.instagram.com/${e.username}/?${i}`;return}}else this.addLog("No Unfollow targets ready (waiting for maturity days).","info")}this.addLog("\uD83D\uDED1 All tasks complete or lists empty. Engine stopping.","warning"),await r.set("isRunning",!1),this.active=!1,window.location.href=`https://www.instagram.com/?${i}`}async handleProfilePage(){await this.sleep(3500);let e=window.location.pathname.replace(/\//g,"").toLowerCase(),t=this.followedUsers.some(t=>t.username.toLowerCase()===e&&!t.protected);if(this.config.unfollowEnabled&&t){this.addLog(`Processing Unfollow: @${e}...`,"info");let t=Array.from(document.querySelectorAll('header button, main header button, div[role="button"]')),i=t.find(e=>{let t=e.innerText?.toLowerCase()||"",i=e.getAttribute("aria-label")?.toLowerCase()||"";e.querySelector("title")?.textContent?.toLowerCase();let s=t.includes("message")||t.includes("mensaje")||t.includes("contact"),a=["following","siguiendo","requested","pendiente"].some(e=>t.includes(e)||i.includes(e)),o=!!e.querySelector('svg[aria-label="Following"]')||!!e.querySelector('svg[aria-label="Siguiendo"]')||Array.from(e.querySelectorAll("path")).some(e=>e.getAttribute("d")?.includes("M12.003 20.003"));return!s&&(a||o)&&e.offsetHeight>0});if(i){i.scrollIntoView({block:"center"}),await this.sleep(1500),await this.nativeClick(i),await this.sleep(1500);for(let e=0;e<5;e++){let e=document.querySelector('div[role="dialog"]');if(e){let t=Array.from(e.querySelectorAll('button, div[role="button"], span[role="button"], span')),i=t.find(e=>{let t=e.textContent?.toLowerCase().trim()||"";return"unfollow"===t||"dejar de seguir"===t});if(i){await this.nativeClick(i);break}}await this.sleep(800)}await this.sleep(3e3);let t=Array.from(document.querySelectorAll("header button, main header button")).find(e=>{let t=e.textContent?.toLowerCase()||"";return("follow"===t||"seguir"===t)&&e.offsetHeight>0});return t?(this.stats.unfollows++,await r.set("stats",this.stats),this.followedUsers=this.followedUsers.filter(t=>t.username.toLowerCase()!==e),await r.set("followedUsers",this.followedUsers),this.addLog(`>>> SUCCESS: @${e} unfollowed.`,"success"),await this.randomSleep("unfollow")):this.addLog(`Failed to verify unfollow for @${e}. Retrying next time.`,"warning"),"DONE"}{let t=document.querySelector("button")?.textContent?.toLowerCase()==="follow";return t?(this.followedUsers=this.followedUsers.filter(t=>t.username.toLowerCase()!==e),await r.set("followedUsers",this.followedUsers)):this.addLog(`Could not find Unfollow button for @${e}`,"warning"),"DONE"}}let i=await r.get("targetCompetitors")||[],s=i.some(t=>t.replace("@","").toLowerCase()===e);if(s){this.addLog(`At Competitor Profile: @${e}`,"info");let t=Array.from(document.querySelectorAll("a")).find(e=>e.href.includes("/followers/"));t&&(t.click(),await this.sleep(5e3));return}{let t=window.location.href.split("?")[0].replace(/\/$/,"").toLowerCase(),i=this.processedHistory.includes(t),s=this.sessionEngagedProfiles.has(t);if(s)window.history.back(),await this.sleep(4e3);else if(i){let i=document.querySelector('article a[href*="/p/"], main a[href*="/p/"]');if(i)i.click(),await this.sleep(4e3);else{if(this.config.followEnabled){let i=Array.from(document.querySelectorAll("header button, main header button")).find(e=>{let t=e.textContent?.toLowerCase()||"";return"follow"===t||"seguir"===t});i&&(i.click(),this.stats.follows++,await r.set("stats",this.stats),await this.saveFollowedTarget(e,t))}this.sessionEngagedProfiles.add(t),window.history.back(),await this.sleep(4e3)}}}}async handleHashtagPage(){let e=Array.from(document.querySelectorAll('a[href*="/p/"], a[href*="/reels/"]')),t=e.filter(e=>!e.getAttribute("href")?.startsWith("/explore/")&&!this.processedHistory.includes(e.href.split("?")[0].replace(/\/$/,"").toLowerCase()));if(t.length>0){let e=t[0];await this.addToHistory(e.href),e.click(),await this.sleep(4e3)}else window.scrollBy({top:1e3,behavior:"smooth"}),await this.sleep(3e3)}async handleFollowersModal(e){let t=Array.from(e.querySelectorAll('a[role="link"]')),i=t.filter(e=>e.href.includes("instagram.com/")&&!this.processedHistory.includes(e.href.split("?")[0].replace(/\/$/,"").toLowerCase())&&e.textContent?.trim());if(i.length>0){let e=i[0];await this.addToHistory(e.href),e.click(),await this.sleep(5e3)}else{let t=e.querySelector('div[style*="overflow-y: auto"], ._aano');if(t)t.scrollBy(0,600);else{let t=e.querySelectorAll("li");t.length>0&&t[t.length-1].scrollIntoView()}await this.sleep(4e3)}}async handlePostInteraction(){let e=!1,t=document.querySelector('div[role="dialog"]'),i=t||document.querySelector("article")||document,s=Array.from(i.querySelectorAll("header a")),a=s.find(e=>e.innerText?.trim().length>1)||i.querySelector('div > a[href*="/"]'),o=a?.textContent?.trim()||"",n=a?.href?.split("?")[0].replace(/\/$/,"").toLowerCase()||"";if(this.config.likeEnabled){let t=Array.from(i.querySelectorAll("svg")).find(e=>{let t=e.innerHTML||"",i=e.querySelector("path")?.getAttribute("d")||"",s=(e.getAttribute("aria-label")||"").toLowerCase();return t.includes("M16.792")||t.includes("M34.6")||t.includes("M47.5")||i.includes("M47.5")||i.includes("M16.792")||"like"===s||"me gusta"===s});if(t){let i=t.closest("button")||t.parentElement,s=i.querySelector('svg[fill="#ed4956"]')||i.querySelector('svg[color="#ed4956"]')||i.querySelector("svg[aria-label]")?.getAttribute("aria-label")==="Unlike"||i.querySelector("svg[aria-label]")?.getAttribute("aria-label")==="Ya no me gusta";s||(i.click(),this.stats.likes++,await r.set("stats",this.stats),e=!0)}}if(this.config.followEnabled){let t=Array.from(i.querySelectorAll("button")),s=t.find(e=>{let t=(e.textContent?.toLowerCase()||"").trim(),i=e.getAttribute("aria-label")?.toLowerCase()||"";return"follow"===t||"seguir"===t||"follow"===i||"seguir"===i});s&&(s.click(),this.stats.follows++,await r.set("stats",this.stats),o&&n&&await this.saveFollowedTarget(o,n),e=!0)}e?(this.currentSessionActions++,n&&this.sessionEngagedProfiles.add(n),await this.randomSleep("action")):(this.addLog("Already interacted. Skipping...","info"),await this.sleep(2e3));let l=null;for(let e of['svg[aria-label="Close"]','svg[aria-label="Cerrar"]','svg[aria-label="Back"]','svg[aria-label="Volver"]','div[role="dialog"] ._abl-']){let t=document.querySelector(e);if(t&&(l=t.closest("button")||t.closest('div[role="button"]')))break}l?l.click():document.dispatchEvent(new KeyboardEvent("keydown",{key:"Escape",code:"Escape",bubbles:!0})),await this.sleep(1500),(window.location.pathname.includes("/p/")||window.location.pathname.includes("/reels/"))&&(this.addLog("Post didn't close normally. Retrying exit...","warning"),window.history.back(),await this.sleep(2500),(window.location.pathname.includes("/p/")||window.location.pathname.includes("/reels/"))&&(this.addLog("Critical: Stuck in post loop. Forcing Home refresh.","warning"),window.location.href="https://www.instagram.com/?variant=force_home"))}async nativeClick(e){if(!e)return;let t={bubbles:!0,cancelable:!0,view:window};e.dispatchEvent(new MouseEvent("mousedown",t)),await this.sleep(100),e.dispatchEvent(new MouseEvent("mouseup",t)),e.dispatchEvent(new MouseEvent("click",t))}async executeChaosRoutine(){if(this.addLog("\u26a1 ENTERING HUMANIZATION MODE: Chaotic Behavior Active","warning"),!window.location.pathname.match(/^\/$/)){window.location.href="https://www.instagram.com/";return}let e=6e4*(this.delayConfig.chaosDur||5),t=Date.now()+e,i=Date.now();for(;Date.now()<t&&this.active;){let e=await r.get("isRunning");if(!e){this.active=!1,this.addLog("\uD83D\uDED1 Bot stopped manually during Chaos Mode.","warning");return}if(Date.now()>i){let e=Math.floor(800*Math.random())+200,t=Math.random()>.8?-1:1;window.scrollBy({top:e*t,behavior:"smooth"}),i=Date.now()+(5e3*Math.random()+2e3)}await this.sleep(1e3)}this.active&&(this.addLog("\u26a1 HUMANIZATION COMPLETE: Resuming operations.","success"),window.location.reload())}async analyzeOwnProfile(){try{let e=Array.from(document.querySelectorAll("a, button")).find(e=>e.textContent?.toLowerCase().includes("edit profile")||e.textContent?.toLowerCase().includes("editar perfil"));if(!e)return;this.addLog("\uD83D\uDD0D Detecting Own Profile: Extracting Analytics...","info");let t=document.querySelector("header");if(!t)return;let i=t.querySelector("h2")||t.querySelector("h1"),s=i?.textContent||"unknown",a=t.querySelector("img"),o=a?.src||"",n=Array.from(t.querySelectorAll("ul li")),l=e=>{if(!e)return"0";let t=e.querySelector("span")?.getAttribute("title"),i=e.querySelector("span")?.textContent;return t||i||"0"},c=l(n[0]),h=l(n[1]),d=l(n[2]),u=t.lastElementChild,w=u?.querySelector("span")?.textContent||"",f=u?.querySelector("div > span")?.textContent||"",g={username:s,fullName:w,avatarUrl:o,stats:{posts:c.replace(/,/g,""),followers:h.replace(/,/g,""),following:d.replace(/,/g,"")},bio:f,timestamp:Date.now()};await r.set("currentUserStats",g),this.addLog("\u2705 Analytics Updated: "+JSON.stringify(g.stats),"success"),this.sessionEngagedProfiles.add("MY_PROFILE_STATS")}catch(e){this.addLog("Analytics Error: "+e.message,"warning")}}}},{"@plasmohq/storage":"25Hq9","@parcel/transformer-js/src/esmodule-helpers.js":"fRZO2"}],"25Hq9":[function(e,t,i){var s=e("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(i),s.export(i,"BaseStorage",()=>n),s.export(i,"Storage",()=>l);var a=e("pify"),o=s.interopDefault(a),r=()=>{try{let e=globalThis.navigator?.userAgent.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if("Chrome"===e[1])return 100>parseInt(e[2])||globalThis.chrome.runtime?.getManifest()?.manifest_version===2}catch{}return!1},n=class{#e;#t;get primaryClient(){return this.#t}#i;get secondaryClient(){return this.#i}#s;get area(){return this.#s}get hasWebApi(){try{return"u">typeof window&&!!window.localStorage}catch(e){return console.error(e),!1}}#a=new Map;#o;get copiedKeySet(){return this.#o}isCopied=e=>this.hasWebApi&&(this.allCopied||this.copiedKeySet.has(e));#r=!1;get allCopied(){return this.#r}getExtStorageApi=()=>globalThis.browser?.storage||globalThis.chrome?.storage;get hasExtensionApi(){try{return!!this.getExtStorageApi()}catch(e){return console.error(e),!1}}isWatchSupported=()=>this.hasExtensionApi;keyNamespace="";isValidKey=e=>e.startsWith(this.keyNamespace);getNamespacedKey=e=>`${this.keyNamespace}${e}`;getUnnamespacedKey=e=>e.slice(this.keyNamespace.length);serde={serializer:JSON.stringify,deserializer:JSON.parse};constructor({area:e="sync",allCopied:t=!1,copiedKeyList:i=[],serde:s={}}={}){this.setCopiedKeySet(i),this.#s=e,this.#r=t,this.serde={...this.serde,...s};try{this.hasWebApi&&(t||i.length>0)&&(this.#i=window.localStorage)}catch{}try{this.hasExtensionApi&&(this.#e=this.getExtStorageApi(),r()?this.#t=(0,o.default)(this.#e[this.area],{exclude:["getBytesInUse"],errorFirst:!1}):this.#t=this.#e[this.area])}catch{}}setCopiedKeySet(e){this.#o=new Set(e)}rawGetAll=()=>this.#t?.get();getAll=async()=>Object.entries(await this.rawGetAll()).filter(([e])=>this.isValidKey(e)).reduce((e,[t,i])=>(e[this.getUnnamespacedKey(t)]=i,e),{});copy=async e=>{let t=void 0===e;if(!t&&!this.copiedKeySet.has(e)||!this.allCopied||!this.hasExtensionApi)return!1;let i=this.allCopied?await this.rawGetAll():await this.#t.get((t?[...this.copiedKeySet]:[e]).map(this.getNamespacedKey));if(!i)return!1;let s=!1;for(let e in i){let t=i[e],a=this.#i?.getItem(e);this.#i?.setItem(e,t),s||=t!==a}return s};rawGet=async e=>(await this.rawGetMany([e]))[e];rawGetMany=async e=>this.hasExtensionApi?await this.#t.get(e):e.filter(this.isCopied).reduce((e,t)=>(e[t]=this.#i?.getItem(t),e),{});rawSet=async(e,t)=>await this.rawSetMany({[e]:t});rawSetMany=async e=>(this.#i&&Object.entries(e).filter(([e])=>this.isCopied(e)).forEach(([e,t])=>this.#i.setItem(e,t)),this.hasExtensionApi&&await this.#t.set(e),null);clear=async(e=!1)=>{e&&this.#i?.clear(),await this.#t.clear()};rawRemove=async e=>{await this.rawRemoveMany([e])};rawRemoveMany=async e=>{this.#i&&e.filter(this.isCopied).forEach(e=>this.#i.removeItem(e)),this.hasExtensionApi&&await this.#t.remove(e)};removeAll=async()=>{let e=Object.keys(await this.getAll());await this.removeMany(e)};watch=e=>{let t=this.isWatchSupported();return t&&this.#n(e),t};#n=e=>{for(let t in e){let i=this.getNamespacedKey(t),s=this.#a.get(i)?.callbackSet||new Set;if(s.add(e[t]),s.size>1)continue;let a=(e,t)=>{if(t!==this.area||!e[i])return;let s=this.#a.get(i);if(!s)throw Error(`Storage comms does not exist for nsKey: ${i}`);Promise.all([this.parseValue(e[i].newValue),this.parseValue(e[i].oldValue)]).then(([e,i])=>{for(let a of s.callbackSet)a({newValue:e,oldValue:i},t)})};this.#e.onChanged.addListener(a),this.#a.set(i,{callbackSet:s,listener:a})}};unwatch=e=>{let t=this.isWatchSupported();return t&&this.#l(e),t};#l(e){for(let t in e){let i=this.getNamespacedKey(t),s=e[t],a=this.#a.get(i);a&&(a.callbackSet.delete(s),0===a.callbackSet.size&&(this.#a.delete(i),this.#e.onChanged.removeListener(a.listener)))}}unwatchAll=()=>this.#c();#c(){this.#a.forEach(({listener:e})=>this.#e.onChanged.removeListener(e)),this.#a.clear()}async getItem(e){return this.get(e)}async getItems(e){return await this.getMany(e)}async setItem(e,t){await this.set(e,t)}async setItems(e){await await this.setMany(e)}async removeItem(e){return this.remove(e)}async removeItems(e){return await this.removeMany(e)}},l=class extends n{get=async e=>{let t=this.getNamespacedKey(e),i=await this.rawGet(t);return this.parseValue(i)};getMany=async e=>{let t=e.map(this.getNamespacedKey),i=await this.rawGetMany(t),s=await Promise.all(Object.values(i).map(this.parseValue));return Object.keys(i).reduce((e,t,i)=>(e[this.getUnnamespacedKey(t)]=s[i],e),{})};set=async(e,t)=>{let i=this.getNamespacedKey(e),s=this.serde.serializer(t);return this.rawSet(i,s)};setMany=async e=>{let t=Object.entries(e).reduce((e,[t,i])=>(e[this.getNamespacedKey(t)]=this.serde.serializer(i),e),{});return await this.rawSetMany(t)};remove=async e=>{let t=this.getNamespacedKey(e);return this.rawRemove(t)};removeMany=async e=>{let t=e.map(this.getNamespacedKey);return await this.rawRemoveMany(t)};setNamespace=e=>{this.keyNamespace=e};parseValue=async e=>{try{if(void 0!==e)return this.serde.deserializer(e)}catch(e){console.error(e)}}}},{pify:"fS8wt","@parcel/transformer-js/src/esmodule-helpers.js":"fRZO2"}],fS8wt:[function(e,t,i){var s=e("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(i),s.export(i,"default",()=>r);let a=(e,t,i,s)=>function(...a){let o=t.promiseModule;return new o((o,r)=>{t.multiArgs?a.push((...e)=>{t.errorFirst?e[0]?r(e):(e.shift(),o(e)):o(e)}):t.errorFirst?a.push((e,t)=>{e?r(e):o(t)}):a.push(o),Reflect.apply(e,this===i?s:this,a)})},o=new WeakMap;function r(e,t){t={exclude:[/.+(?:Sync|Stream)$/],errorFirst:!0,promiseModule:Promise,...t};let i=typeof e;if(!(null!==e&&("object"===i||"function"===i)))throw TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${null===e?"null":i}\``);let s=(e,i)=>{let s=o.get(e);if(s||(s={},o.set(e,s)),i in s)return s[i];let a=e=>"string"==typeof e||"symbol"==typeof i?i===e:e.test(i),r=Reflect.getOwnPropertyDescriptor(e,i),n=void 0===r||r.writable||r.configurable,l=t.include?t.include.some(e=>a(e)):!t.exclude.some(e=>a(e)),c=l&&n;return s[i]=c,c},r=new WeakMap,n=new Proxy(e,{apply(e,i,s){let o=r.get(e);if(o)return Reflect.apply(o,i,s);let l=t.excludeMain?e:a(e,t,n,e);return r.set(e,l),Reflect.apply(l,i,s)},get(e,i){let o=e[i];if(!s(e,i)||o===Function.prototype[i])return o;let l=r.get(o);if(l)return l;if("function"==typeof o){let i=a(o,t,n,e);return r.set(o,i),i}return o}});return n}},{"@parcel/transformer-js/src/esmodule-helpers.js":"fRZO2"}],fRZO2:[function(e,t,i){i.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},i.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.exportAll=function(e,t){return Object.keys(e).forEach(function(i){"default"===i||"__esModule"===i||t.hasOwnProperty(i)||Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[i]}})}),t},i.export=function(e,t,i){Object.defineProperty(e,t,{enumerable:!0,get:i})}},{}]},["cBHh0"],"cBHh0","parcelRequiredb63"),globalThis.define=t;